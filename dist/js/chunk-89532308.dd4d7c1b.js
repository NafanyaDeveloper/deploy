(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89532308"],{"0748":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tbl"},[e("table",{staticClass:"table table-striped"},[e("thead",[e("tr",[e("th",[t._v("#")]),t._l(t.headers,(function(s){return e("th",[t._v(t._s(s))])}))],2)]),e("tbody",t._l(t.items,(function(s,a){return e("tr",[t._t("default",[t._v("Привет")],{item:s,index:a})],2)})),0)])])},o=[],n={name:"Tbl",props:{headers:{type:Array,required:!0},items:{type:Array,required:!0}}},i=n,l=e("2877"),r=Object(l["a"])(i,a,o,!1,null,null,null);s["a"]=r.exports},"0e55":function(t,s,e){},1999:function(t,s,e){"use strict";var a=e("8e23"),o=e.n(a);o.a},"22d7":function(t,s,e){"use strict";var a=e("0e55"),o=e.n(a);o.a},"714b":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n            default header\n          ")])],2),e("div",{staticClass:"modal-body"},[t._t("body",[t._v("\n            default body\n          ")])],2),e("div",{staticClass:"modal-footer"},[t._t("footer",[t._v("\n            default footer\n            "),e("button",{staticClass:"modal-default-button",on:{click:function(s){return t.$emit("close")}}},[t._v("\n              OK\n            ")])])],2)])])])])},o=[],n={name:"modal",methods:{close:function(){window.location.reload(),this.$emit("close")}}},i=n,l=(e("22d7"),e("2877")),r=Object(l["a"])(i,a,o,!1,null,null,null);s["a"]=r.exports},"8e23":function(t,s,e){},af6b:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"customer"},[e("div",{staticClass:"container"},[e("Tbl",{attrs:{headers:t.titles,items:t.customerList},scopedSlots:t._u([{key:"default",fn:function(s){return[e("td",[t._v("\n                    "+t._s(s.index+1)+"\n                ")]),t._l(t.keys,(function(a){return e("td",[t._v("\n                    "+t._s(s.item[a])+"\n                ")])})),e("td",[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:t.disable},on:{click:function(e){return t.showAddUserModal(s.item)}}},[t._v("Прикрепить пользователя")])])]}}])})],1),t.showModal?e("modal",[e("h3",{attrs:{slot:"header"},slot:"header"},[t._v("Ошибка")]),e("p",{attrs:{slot:"body"},slot:"body"},[t._v("Что-то пошло не так. Перезагрузите страницу!")]),e("div",{staticClass:"d-inline w-100",attrs:{slot:"footer"},slot:"footer"},[e("router-link",{attrs:{to:"/home",exact:""}},[e("button",{staticClass:"btn btn-secondary float-left",attrs:{type:"button"}},[t._v("На главную")])]),e("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"button"},on:{click:t.reload}},[t._v("Перезагрузить")])],1)]):t._e(),t.infoModal?e("modal",[e("h3",{attrs:{slot:"header"},slot:"header"},[t._v("Информация")]),e("p",{attrs:{slot:"body"},slot:"body"},[t._v("Изменения успешно внесены")]),e("div",{staticClass:"d-inline w-100",attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"btn btn-secondary float-left",attrs:{type:"button"},on:{click:function(s){t.infoModal=!1}}},[t._v("Закрыть")])])]):t._e(),t.addingModal?e("modal",{on:{close:function(s){t.addingModal=!1}}},[e("h3",{attrs:{slot:"header"},slot:"header"},[t._v("Прикрепление пользователя")]),e("div",{attrs:{slot:"body"},slot:"body"},[e("form",[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"user"}},[t._v("Пользователь")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.item.userId,expression:"item.userId"}],staticClass:"form-control",attrs:{name:"user"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.item,"userId",s.target.multiple?e:e[0])}}},t._l(t.userList,(function(s){return e("option",{domProps:{value:s.id}},[t._v(t._s(s.surname)+" "+t._s(s.name))])})),0)])])]),e("div",{staticClass:"d-inline w-100",attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"btn btn-secondary float-left",attrs:{type:"button",disabled:t.disable},on:{click:function(s){t.addingModal=!1}}},[t._v("Закрыть")]),e("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"button",disabled:t.disable},on:{click:t.addUser}},[t._v("Прикрепить")])])]):t._e()],1)},o=[],n=(e("7f7f"),e("0748")),i=(e("bc3a"),e("714b")),l=(e("83d6"),{components:{Tbl:n["a"],modal:i["a"]},data:function(){return{titles:["Имя","Логин","Код","Адрес","Пользователь",""],keys:["name","userName","code","address","storeUserName"],item:null,showModal:!1,addingModal:!1,disable:!1,infoModal:!1}},methods:{reload:function(){window.location.reload()},showAddUserModal:function(t){this.item=Object.assign({},t),this.addingModal=!0},callback:function(t){this.disable=!1,this.addingModal=!1,t?this.infoModal=!0:this.showModal=!0},addUser:function(){if(void 0==this.item.userId)this.addingModal=!1;else{this.disable=!0;var t=this.$store.getters.USER_BY_ID(this.item.userId);this.item.storeUserName=t.surname+" "+t.name,this.$store.dispatch("EDIT_CUSTOMER",{item:this.item,callback:this.callback})}}},mounted:function(){this.$store.dispatch("GET_CUSTOMERS"),this.$store.dispatch("GET_USERS")},computed:{userList:function(){var t=this.$store.getters.USERS;return t||(this.showModal=!0,[])},customerList:function(){var t=this.$store.getters.CUSTOMERS;return t||(this.showModal=!0,[])}}}),r=l,d=(e("1999"),e("2877")),c=Object(d["a"])(r,a,o,!1,null,null,null);s["default"]=c.exports}}]);
//# sourceMappingURL=chunk-89532308.dd4d7c1b.js.map