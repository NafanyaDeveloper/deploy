(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c5323326"],{"0748":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tbl"},[s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",[t._v("#")]),t._l(t.headers,(function(e){return s("th",[t._v(t._s(e))])}))],2)]),s("tbody",t._l(t.items,(function(e,a){return s("tr",[t._t("default",[t._v("Привет")],{item:e,index:a})],2)})),0)])])},i=[],o={name:"Tbl",props:{headers:{type:Array,required:!0},items:{type:Array,required:!0}}},r=o,n=s("2877"),l=Object(n["a"])(r,a,i,!1,null,null,null);e["a"]=l.exports},"0e55":function(t,e,s){},"22d7":function(t,e,s){"use strict";var a=s("0e55"),i=s.n(a);i.a},"2e08":function(t,e,s){var a=s("9def"),i=s("9744"),o=s("be13");t.exports=function(t,e,s,r){var n=String(o(t)),l=n.length,c=void 0===s?" ":String(s),d=a(e);if(d<=l||""==c)return n;var u=d-l,m=i.call(c,Math.ceil(u/c.length));return m.length>u&&(m=m.slice(0,u)),r?m+n:n+m}},"2fdb":function(t,e,s){"use strict";var a=s("5ca1"),i=s("d2c8"),o="includes";a(a.P+a.F*s("5147")(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"3eee":function(t,e,s){"use strict";var a=s("fd8d"),i=s.n(a);i.a},"714b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n            default header\n          ")])],2),s("div",{staticClass:"modal-body"},[t._t("body",[t._v("\n            default body\n          ")])],2),s("div",{staticClass:"modal-footer"},[t._t("footer",[t._v("\n            default footer\n            "),s("button",{staticClass:"modal-default-button",on:{click:function(e){return t.$emit("close")}}},[t._v("\n              OK\n            ")])])],2)])])])])},i=[],o={name:"modal",methods:{close:function(){window.location.reload(),this.$emit("close")}}},r=o,n=(s("22d7"),s("2877")),l=Object(n["a"])(r,a,i,!1,null,null,null);e["a"]=l.exports},9744:function(t,e,s){"use strict";var a=s("4588"),i=s("be13");t.exports=function(t){var e=String(i(this)),s="",o=a(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(s+=e);return s}},c77f:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order"},[s("div",{staticClass:"container"},[s("div",{staticClass:"categories"},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategories,expression:"selectedCategories"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inlineCheckbox1",value:"Новый",checked:""},domProps:{checked:Array.isArray(t.selectedCategories)?t._i(t.selectedCategories,"Новый")>-1:t.selectedCategories},on:{change:function(e){var s=t.selectedCategories,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o="Новый",r=t._i(s,o);a.checked?r<0&&(t.selectedCategories=s.concat([o])):r>-1&&(t.selectedCategories=s.slice(0,r).concat(s.slice(r+1)))}else t.selectedCategories=i}}}),s("label",{staticClass:"form-check-label",attrs:{for:"inlineCheckbox1"}},[t._v("Новый")])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategories,expression:"selectedCategories"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inlineCheckbox2",value:"Выполняется",checked:""},domProps:{checked:Array.isArray(t.selectedCategories)?t._i(t.selectedCategories,"Выполняется")>-1:t.selectedCategories},on:{change:function(e){var s=t.selectedCategories,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o="Выполняется",r=t._i(s,o);a.checked?r<0&&(t.selectedCategories=s.concat([o])):r>-1&&(t.selectedCategories=s.slice(0,r).concat(s.slice(r+1)))}else t.selectedCategories=i}}}),s("label",{staticClass:"form-check-label",attrs:{for:"inlineCheckbox2"}},[t._v("Выполняется")])]),s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategories,expression:"selectedCategories"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inlineCheckbox3",value:"Выполнен",checked:""},domProps:{checked:Array.isArray(t.selectedCategories)?t._i(t.selectedCategories,"Выполнен")>-1:t.selectedCategories},on:{change:function(e){var s=t.selectedCategories,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o="Выполнен",r=t._i(s,o);a.checked?r<0&&(t.selectedCategories=s.concat([o])):r>-1&&(t.selectedCategories=s.slice(0,r).concat(s.slice(r+1)))}else t.selectedCategories=i}}}),s("label",{staticClass:"form-check-label",attrs:{for:"inlineCheckbox3"}},[t._v("Выполнен")])])]),s("Tbl",{attrs:{headers:t.titles,items:t.orderList},scopedSlots:t._u([{key:"default",fn:function(e){return[s("td",[t._v("\n                    "+t._s(e.index+1)+"\n                ")]),s("td",[t._v("\n                    "+t._s(e.item.orderNumber)+"\n                ")]),s("td",[t._v("\n                    "+t._s(e.item.customerName)+"\n                ")]),s("td",[t._v("\n                    "+t._s(t._f("date")(e.item.orderDate))+"\n                ")]),s("td",[t._v("\n                    "+t._s(t._f("date")(e.item.shipmentDate))+"\n                ")]),s("td",[t._v("\n                    "+t._s(e.item.status)+"\n                ")]),"Новый"!=e.item.status||t.isManager?t._e():s("td",[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:t.deletion},on:{click:function(s){return t.cancel(e.item.id)}}},[t._v("Отменить")])]),"Выполнен"!=e.item.status&&t.isManager?s("td",[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:t.deletion},on:{click:function(s){return t.showEditModal(e.item)}}},[t._v("Изменить")])]):t._e(),"Выполнен"==e.item.status&&t.isManager?s("td"):t._e()]}}])})],1),t.showModal?s("modal",{on:{close:function(e){t.showModal=!1}}},[s("h3",{attrs:{slot:"header"},slot:"header"},[t._v("Ошибка")]),s("p",{attrs:{slot:"body"},slot:"body"},[t._v("Что-то пошло не так. Перезагрузите страницу!")]),s("div",{staticClass:"d-inline w-100",attrs:{slot:"footer"},slot:"footer"},[s("router-link",{attrs:{to:"/home",exact:""}},[s("button",{staticClass:"btn btn-secondary float-left",attrs:{type:"button"}},[t._v("На главную")])]),s("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"button"},on:{click:t.reload}},[t._v("Перезагрузить")])],1)]):t._e(),t.editModal?s("modal",{on:{close:function(e){t.editModal=!1}}},[s("h3",{attrs:{slot:"header"},slot:"header"},[t._v("Редактирование заказа")]),s("div",{attrs:{slot:"body"},slot:"body"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"status"}},[t._v("Статус")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.item.status,expression:"item.status"}],staticClass:"form-control",attrs:{name:"status"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.item,"status",e.target.multiple?s:s[0])}}},t._l(t.statuses,(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"date"}},[t._v("Дата доставки")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.shipmentDate,expression:"item.shipmentDate"}],staticClass:"form-control",attrs:{type:"date",id:"date",min:t.today,name:"date"},domProps:{value:t.item.shipmentDate},on:{input:function(e){e.target.composing||t.$set(t.item,"shipmentDate",e.target.value)}}}),t.dateAlert?s("small",{staticClass:"text-muted",attrs:{id:"passwordHelpInline"}},[t._v("\n                        Введите дату\n                    ")]):t._e()])])]),s("div",{staticClass:"d-inline w-100",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"btn btn-secondary float-left",attrs:{type:"button",disabled:t.disable},on:{click:function(e){t.editModal=!1}}},[t._v("Закрыть")]),s("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"button",disabled:t.disable},on:{click:t.editOrder}},[t._v("Изменить")])])]):t._e()],1)},i=[],o=(s("6762"),s("2fdb"),s("f576"),s("0748")),r=(s("bc3a"),s("714b")),n=(s("83d6"),{components:{Tbl:o["a"],modal:r["a"]},data:function(){return{titles:["Код","Заказчик","Дата заказа","Дата доставки","Статус",""],keys:["orderNumber","customerName","orderDate","shipmentDate","status"],showModal:!1,deletion:!1,editModal:!1,disable:!1,dateAlert:!1,today:null,infoModal:!1,selectedCategories:["Новый","Выполняется","Выполнен"],item:{}}},methods:{reload:function(){window.location.reload()},cancel:function(t){this.deletion=!0,this.$store.dispatch("DELETE_USER_ORDER",{id:t,callback:this.callback})},callback:function(t){this.disable=!1,this.editModal=!1,t?this.infoModal=!0:this.showModal=!0},showEditModal:function(t){this.item=Object.assign({},t),this.editModal=!0},validate:function(){return"Новый"==this.item.status||null!=this.item.shipmentDate||(this.dateAlert=!0,!1)},editOrder:function(){this.validate()&&(this.disable=!0,this.$store.dispatch("EDIT_ORDER",{item:this.item,callback:this.callback}))}},created:function(){"manager"==localStorage.getItem("role")?this.$store.dispatch("GET_ORDERS"):this.$store.dispatch("GET_USER_ORDERS");var t=new Date,e=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();this.today=a+"-"+s+"-"+e},computed:{orderList:function(){var t=this,e=this.$store.getters.ORDERS;return e?e.filter((function(e){return t.selectedCategories.includes(e.status)})):(this.showModal=!0,[])},isManager:function(){return"manager"==localStorage.getItem("role")},statuses:function(){return"Новый"==this.item.status?["Новый","Выполняется","Выполнен"]:"Выполняется"==this.item.status?["Выполняется","Выполнен"]:["Выполнен"]}}}),l=n,c=(s("3eee"),s("2877")),d=Object(c["a"])(l,a,i,!1,null,null,null);e["default"]=d.exports},f576:function(t,e,s){"use strict";var a=s("5ca1"),i=s("2e08"),o=s("a25f"),r=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);a(a.P+a.F*r,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},fd8d:function(t,e,s){}}]);
//# sourceMappingURL=chunk-c5323326.f7ab941f.js.map